@{
    Layout = "~/Areas/Public/Views/Shared/Layout/_LayoutPublic.cshtml";
}

@using Hrmanagement.Core.DTO.DtoOutput;
@using System.Globalization;
@{
    var project = ViewData["project"] as List<ProjectOutput>;
    if(project !=null)
    {
        project = project.Where(p => p.IsActive == true).ToList();
    }

    var timeSheetId = ViewData["timesheet"] as TimeSheetOutput;
    int id = timeSheetId != null ? timeSheetId.id : 0;
    var hours = new[]
    {
       "1","2","3","4","5","6","7","8","9","10","11","12"  
    };
    var currentStatus = new[]
    {
        "Finished","Pending"
    };
}


<section class="content container-fluid">
    <div class="card">
        <div class="card-header">
            <h3 class="card-title">Create New TimeSheet</h3>
        </div>
        <form class="card-body" method="post" action="~/Public/TimeSheet/AddUpdateTimeSheet" onsubmit="return addUpdateTimeSheet()">
            <input type="hidden" id="id" name="id" value="@timeSheetId?.id" />
            <div class="form-group row">
                <div class="col-sm-6">
                    <label for="firstName" class="col-form-label col-sm-2">Project Name</label>
                    <div class="col-sm-10">
                        <select id="projectId" name="ProjectId" style="width: 100%" required>
                            <option value="">Select Project</option>
                            @foreach (var projectList in project)
                            {
                                <option value="@projectList.Id" @(timeSheetId?.ProjectId == projectList.Id ? "selected" : "")>@projectList.Title</option>
                                @*<option value="@projectList.Id">@projectList.Title</option>*@
                            }
                        </select>
                    </div>
                </div>
                <div class="col-sm-6">
                    <label for="lastName" class="col-form-label col-sm-2">Title</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" id="taskTitle" name="TaskTitle" placeholder="TaskTitle" value="@timeSheetId?.TaskTitle">
                    </div>
                </div>
            </div>

            <div class="form-group row">
                <div class="col-sm-6">
                    <label for="email" class="col-form-label col-sm-2">Description</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" id="taskDescription" name="TaskDescription" placeholder="TaskDescription" value="@timeSheetId?.TaskDescription">
                    </div>
                </div>

                <div class="col-sm-6">
                    <label for="email" class="col-form-label col-sm-2">Hours</label>
                    <div class="col-sm-10">
                        <select id="hours" name="Hours" style="width: 100%" required>
                            <option value="">Select Hours</option>
                            @foreach (var hoursList in hours)
                            {

                                string formattedHoursList = string.Format("{0:0.##}", hoursList);
                                <option value="@hoursList.ToString()" @(timeSheetId?.Hours != null && timeSheetId?.Hours.ToString("0.##", CultureInfo.InvariantCulture) == formattedHoursList ? "selected" : "")>
                                    @formattedHoursList
                                </option>
                                @*<option value="@hoursList">@hoursList</option>*@
                               @* <option value="@hoursList.ToString()" @(timeSheetId?.Hours.ToString() == hoursList.ToString() ? "selected" : "")>@hoursList</option>*@
                                @*<option value="@hoursList.ToString()" @(timeSheetId?.Hours.ToString() == hoursList.ToString() ? "selected" : "")>@hoursList.ToString()</option>*@
                               @* <option value="@hoursList.ToString()" @(timeSheetId?.Hours != null && timeSheetId?.Hours.ToString() == hoursList.ToString() ? "selected" : "")>@hoursList.ToString()</option>*@

                            }
                        </select>
                        
                    </div>
                </div>
            </div>

            <div class="form-group row">
                <div class="col-sm-6">
                    <label for="email" class="col-form-label col-sm-2">Status</label>
                    <div class="col-sm-10">
                        <select id="status" name="Status" style="width: 100%" required>
                            <option value="">Select Status</option>
                            @foreach (var currentStatusList in currentStatus)
                            {
                                <option value="@currentStatusList" @(timeSheetId?.Status == currentStatusList ? "selected" : "")>@currentStatusList</option>
                               @* <option value="@currentStatusList">@currentStatusList</option>*@

                            }
                        </select>
                        @*<input type="text" class="form-control" id="status" name="Status" placeholder="Status">*@
                    </div>
                </div>
            </div>
            <div class="card-footer">
                <button type="submit" class="btn btn-info float-left">Save</button>
            </div>
        </form>
    </div>
</section>
@await Component.InvokeAsync("Toaster")